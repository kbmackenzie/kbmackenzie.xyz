@use 'sass:map'
@use 'sass:list'
@use 'sass:math'
@use '@styles/screens'

@function generate_transforms()
  $center:        ( key: 'center'       , 'x': 0%   , 'y': 0%    )
  $top:           ( key: 'top'          , 'x': 0%   , 'y': -115% )
  $top-right:     ( key: 'top-right'    , 'x': 80%  , 'y': -55%  )
  $bottom-right:  ( key: 'bottom-right' , 'x': 80%  , 'y': 55%   )
  $bottom:        ( key: 'bottom'       , 'x': 0%   , 'y': 115%  )
  $bottom-left:   ( key: 'bottom-left'  , 'x': -80% , 'y': 55%   )
  $top-left:      ( key: 'top-left'     , 'x': -80% , 'y': -55%  )
  @return $center, $top, $top-right, $bottom-right, $bottom, $bottom-left, $top-left

$transforms: generate_transforms()
@debug $transforms

@for $i from 1 to (list.length($transforms) + 1)
  $transform: list.nth($transforms, $i)

  $key: map.get($transform, 'key')
  $x: map.get($transform, 'x')
  $y: map.get($transform, 'y')

  @debug 'writing: #{$key}'

  .honeycomb-#{$key}
    animation: 0.5s ease-out (0.1s * $i) honeycomb-animation-#{$key} forwards

  @keyframes honeycomb-animation-#{$key}
    from
      transform: translate(0, 0)
    to
      transform: translate($x, $y)

@function get-slot-height($width)
  @return math.div($width, 2) * math.sqrt(3)

.honeycomb
  $slot-width: 11rem
  $slot-height: get-slot-height($slot-width)

  min-height: $slot-height * 4
  position: relative

  &-slot
    width: $slot-width
    height: $slot-height

    @media (max-width: screens.$xl)
      width: $slot-width - 1rem
      height: get-slot-height($slot-width - 1rem)

    position: absolute
    inset: 0
    margin: auto
    clip-path: polygon(25% 0, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)

    & > img
      width: 65%
      height: 65%
      position: absolute
      inset: 0
      margin: auto
